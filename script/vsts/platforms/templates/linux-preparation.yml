steps:
  - script: |
      sudo apt-get update
      sudo apt-get install -y wget software-properties-common
      wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
      sudo apt-add-repository "deb http://apt.llvm.org/trusty/ llvm-toolchain-trusty-5.0 main"
      sudo apt-get update
      sudo apt-get install -y build-essential ca-certificates clang-5.0 xvfb fakeroot git libsecret-1-dev rpm libx11-dev libxkbfile-dev xz-utils xorriso zsync libxss1 libgconf2-4 libgtk-3-0 libasound2 libicu-dev
    displayName: Install apt dependencies

  - script: sudo /sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024x16
    displayName: Start Xvfb

  - task: NodeTool@0
    inputs:
      versionSpec: 12.13.1
    displayName: Install Node.js 12.13.1

  - script: npm install --global npm@6.12.1
    displayName: Update npm
